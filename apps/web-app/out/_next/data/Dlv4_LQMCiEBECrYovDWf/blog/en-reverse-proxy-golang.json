{"pageProps":{"posts":{"code":"var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var t in e)s(a,t,{get:e[t],enumerable:!0})},h=(a,e,t,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!N.call(a,i)&&i!==t&&s(a,i,{get:()=>e[i],enumerable:!(l=u(e,i))||l.enumerable});return a};var v=(a,e,t)=>(t=a!=null?p(g(a)):{},h(e||!a||!a.__esModule?s(t,\"default\",{value:a,enumerable:!0}):t,a)),w=a=>h(s({},\"__esModule\",{value:!0}),a);var r=k((P,c)=>{c.exports=_jsx_runtime});var b={};f(b,{default:()=>o,frontmatter:()=>y});var n=v(r()),y={title:\"Reverse Proxy with Go\",date:\"2022-06-14\",cover:\"networking.jpg\",isPublished:!0,description:\"A reverse proxy is the application that sits in front of back-end applications and forwards client (e.g. browser) requests to those applications.\",tags:[\"golang\",\"gateway\"]};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",h2:\"h2\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:`The reverse proxy will bring anonymity to the server behind it and make the server more secure\nbecause users don't know where they will interact within, another benefit is caching and load balancing.\nOn the other hand, golang provides an easy way to build a reverse proxy using a standard library.`}),`\n`,(0,n.jsx)(e.h2,{id:\"uses-cases\",children:\"Uses cases\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Load Balancing\"}),`,\nA reverse proxy can be used to load balance requests from users, the interesting part is we can have a minimum of one server.`]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Gateway\"}),`,\nReversed proxy can be used as a gateway to multiple Restful API services, not just that there are several open-source projects that map restful API reverse proxy to GRPC server such as grpc-gateway.`]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"SSl Termination\"}),`,\nSSL Termination, can be used to encrypt incoming and outgoing requests to and from reversed proxy only and let the server behind reverse proxy unencrypted.`]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Caching\"}),`,\nA reverse proxy can temporarily save the response data coming from the internal server.`]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"implementation\",children:\"Implementation\"}),`\n`,(0,n.jsx)(e.p,{children:\"To get started, we need to build HTTP router using http package.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Create a server we need to import it from \",(0,n.jsx)(e.code,{children:\"net/http\"}),\" library.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"After that we call ListenAndServe, who took 2 argument\",`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"The first one is the address, and then we put port in the argument\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"The second one is \",(0,n.jsx)(e.code,{children:\"DefaultServeMux\"}),` but in this case, we want to use the default one provided by the HTTP package,\nso we just put nill`]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.li,{children:\"If the server is not running, we just make it panic\"}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{showlinenumbers:\"\",theme:\"orange\",children:(0,n.jsxs)(e.code,{className:\"language-go\",showlinenumbers:\"\",theme:\"orange\",children:[(0,n.jsxs)(e.div,{\"data-line\":\"1\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"package\"}),` main\n`]}),(0,n.jsx)(e.div,{\"data-line\":\"2\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:`\n`}),(0,n.jsxs)(e.div,{\"data-line\":\"3\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"4\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"net/http\"'}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"5\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fmt\"'}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"6\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.div,{\"data-line\":\"7\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:`\n`}),(0,n.jsxs)(e.div,{\"data-line\":\"8\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"main\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"9\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\thttp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"HandleFunc\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"/\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" reverseProxyHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.div,{\"data-line\":\"10\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:`\n`}),(0,n.jsxs)(e.div,{\"data-line\":\"11\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"    fmt\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Printf\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"Starting users service at port: %v\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8000\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"12\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"ListenAndServe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\":5000\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"13\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token function\",children:\"panic\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"14\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"15\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The next step we will implement reverseProxyHandler function, which is the implementation of \",(0,n.jsx)(e.code,{children:\"http.HandleFunc\"}),`.\nThe first argument is a writer to a response and the second argument is a pointer to a request from user.`]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Inside the function, we will use \",(0,n.jsx)(e.code,{children:\"url.Parse\"}),` to parse the URL string, which will separate such as host, path, etc\nto the struct URL and return it, if the URL string argument is invalid,\nit will give an error and we just respond with an bad gateway error using `,(0,n.jsx)(e.code,{children:\"w.writeHeader\"}),` and return it directly\nto the client.`]}),`\n`,(0,n.jsxs)(e.li,{children:[\"After that, we can send the result URL parse, to the \",(0,n.jsx)(e.code,{children:\"NewSingleHostReverseProxy\"}),` who comes from httputil package.\nIt will prepare either requests or headers from clients to reverse proxy servers.`]}),`\n`,(0,n.jsxs)(e.li,{children:[`Finally, we come to the final part, so we need to check it the reverse proxy is not empty, then do the request\nto the internal server using `,(0,n.jsx)(e.code,{children:\"ServerHTTP\"}),\", and passed forward the request, then get back the response to the client.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{showlinenumbers:\"\",theme:\"orange\",children:(0,n.jsxs)(e.code,{className:\"language-go\",showlinenumbers:\"\",theme:\"orange\",children:[(0,n.jsxs)(e.div,{\"data-line\":\"1\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"reverseProxyHandler\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"w http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ResponseWriter\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" r \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Request\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"2\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\thost\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" url\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"http://localhost:5001\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"3\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"4\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\tw\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"WriteHeader\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"StatusBadGateway\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"5\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"6\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.div,{\"data-line\":\"7\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:`\n`}),(0,n.jsxs)(e.div,{\"data-line\":\"8\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\treverseProxy \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" httputil\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"NewSingleHostReverseProxy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"host\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"9\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" reverseProxy \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"10\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\treverseProxy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"ServeHTTP\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"w\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" r\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"11\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"12\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\thttp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"w\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Service not available\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"StatusServiceUnavailable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"13\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.h2,{id:\"final-result\",children:\"Final Result\"}),`\n`,(0,n.jsx)(e.pre,{showlinenumbers:\"\",theme:\"orange\",children:(0,n.jsxs)(e.code,{className:\"language-go\",showlinenumbers:\"\",theme:\"orange\",children:[(0,n.jsxs)(e.div,{\"data-line\":\"1\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"package\"}),` main\n`]}),(0,n.jsx)(e.div,{\"data-line\":\"2\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:`\n`}),(0,n.jsxs)(e.div,{\"data-line\":\"3\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"4\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fmt\"'}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"5\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"net/url\"'}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"6\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"net/http\"'}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"7\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"net/http/httputil\"'}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"8\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.div,{\"data-line\":\"9\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:`\n`}),(0,n.jsxs)(e.div,{\"data-line\":\"10\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"main\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"11\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\thttp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"HandleFunc\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"/\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" reverseProxyHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.div,{\"data-line\":\"12\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:`\n`}),(0,n.jsxs)(e.div,{\"data-line\":\"13\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"    fmt\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Printf\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"Starting users service at port: %v\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8000\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"14\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"ListenAndServe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\":5000\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"15\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token function\",children:\"panic\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"16\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.div,{\"data-line\":\"17\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:`\n`}),(0,n.jsxs)(e.div,{\"data-line\":\"18\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"reverseProxyHandler\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"w http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ResponseWriter\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" r \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Request\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"19\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\thost\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" url\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"http://localhost:5001\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"20\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"21\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\tw\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"WriteHeader\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"StatusBadGateway\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"22\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"23\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.div,{\"data-line\":\"24\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:`\n`}),(0,n.jsxs)(e.div,{\"data-line\":\"25\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\treverseProxy \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" httputil\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"NewSingleHostReverseProxy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"host\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"26\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" reverseProxy \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"27\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\treverseProxy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"ServeHTTP\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"w\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" r\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"28\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"29\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[\"\thttp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"w\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Service not available\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"StatusServiceUnavailable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.div,{\"data-line\":\"30\",className:\"highlight-line\",\"data-highlighted\":\"false\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.h2,{id:\"summary\",children:\"Summary\"}),`\n`,(0,n.jsxs)(e.p,{children:[`In the end, it's good to know and learn how easy to implement it on golang, so for a production environment,\nI recommended using some of the popular proxies such as HAProxy, Nginx, Traefik, etc.\nIn terms of performance comparison, there are people already doing the benchmark so I will refer to the that `,(0,n.jsx)(e.a,{href:\"https://github.com/juliens/Proxy-Benchmarks\",children:\"repository\"})]}),`\n`,(0,n.jsx)(e.h2,{id:\"aditional\",children:\"Aditional\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://www.youtube.com/watch?v=tWSmUsYLiE4\",children:\"FOSDEM 2019: How to write a reverse proxy with Go in 25 minutes.\"})}),`\n`]})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return w(b);})();\n;return Component;","frontmatter":{"title":"Reverse Proxy with Go","date":"2022-06-14","cover":"networking.jpg","isPublished":true,"description":"A reverse proxy is the application that sits in front of back-end applications and forwards client (e.g. browser) requests to those applications.","tags":["golang","gateway"]},"metadata":{"slug":"en-reverse-proxy-golang","fileName":"en-reverse-proxy-golang.mdx","blurDataURL":null}},"blurDataURL":null,"currentYear":2025},"__N_SSG":true}